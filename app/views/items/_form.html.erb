<% action = @item.persisted? ? item_url(@item) : items_url %>
<% method = @item.persisted? ? "put" : "post" %>
<% button_text = @item.persisted? ? "Update" : "List" %>

<form action="<%= action %>" method="post" role="form">
  <input
     type="hidden"
     name="_method"
     value="<%= method %>">
        
  <input
     type="hidden"
     name="authenticity_token"
     value="<%= form_authenticity_token %>">

  <div class="form-group"> 
    <label for="item_title">Title</label>
    <input
       type="text"
       id="item_title"
       name="item[title]"
       class="form-control"
       value="<%= @item.title %>">   
  </div>
  
  <div class="form-group"> 
    <label for="item_category">Category</label>
    <select id="item_category" name="item[category_id]" class="form-control">
      <option>Select a category...</option>
      <% Category.all.each do |cat| %>
        <option value="<%= cat.id %>"><%= cat.title %></option>
      <% end %>
    </select>
  </div>
  
  <div class="form-group"> 
    <label for="item_era">Era</label>
    <select id="item_era" name="item[era_id]" class="form-control">
      <option>Select an era...</option>
      <% Era.all.sort{ |x, y| y <=> x }.each do |era| %>
        <option value="<%= era.id %>"><%= era.decade %></option>
      <% end %>
    </select>
  </div>
  
  <div class="form-group"> 
    <label for="item_description">Description</label>
    <textarea
       id="item_description"
       name="item[description]"
       class="form-control"
       rows="8"><%= @item.description || "Tell the item's story and try to answer questions shoppers will have." %>
    </textarea>
  </div>
  
  <div class="form-group"> 
    <label for="item_price">Price</label>
    <input
       type="text"
       id="item_price"
       name="item[price]"
       class="form-control"
       value="$<%= @item.price %>">
  </div>
  

  <button type="submit" class="btn btn-info"><%= button_text %></button>
</form>