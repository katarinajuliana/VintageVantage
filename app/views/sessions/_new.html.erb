<form id="session-form"
  role="form">
  
  <input
     name="authenticity_token"
     type="hidden"
     value="<%= form_authenticity_token %>">

  <div class="form-group">
    <input id="user_username"
       name="user[username]"
       type="text"
       placeholder="username">
  </div>

  <div class="form-group">
    <input
       id="user_password"
       name="user[password]"
       type="password"
       placeholder="password">
   </div>

  <button id="sign-in-button" type="submit" class="btn btn-info">Welcome Back</button>
</form>

<script type="application/javascript">
  $(function () {
    $("#session-form").on('submit', function (event) {
      event.preventDefault();

      var formData = $(event.target).serializeJSON();
  
      $.ajax({
        url: "/session.json",
        type: "post",
        data: formData,
        success: function (response) {
          $("#auth-modal").modal("hide");
          $("#user-nav").removeClass("hidden");
          $("#anon-nav").addClass("hidden");

          window.VV.populateUserNav(response, response.shop);
        },
        error: function (response) {
          console.log(response)
        }
      });
    });
  });  
</script>